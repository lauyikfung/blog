<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>刘益枫的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="刘益枫的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="刘益枫的博客">
<meta property="og:url" content="https://lauyikfung.github.io/blog/index.html">
<meta property="og:site_name" content="刘益枫的博客">
<meta property="og:description" content="刘益枫的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Lewis Yik-Fung Lau">
<meta property="article:tag" content="刘益枫,枳枫THU, Lewis Yik-Fung Lau">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/blog/atom.xml" title="刘益枫的博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/blog/css/style.css">

  
    
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">刘益枫的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog/" id="subtitle">The Blog of Lewis Yik-Fung Lau</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://lauyikfung.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Introduction" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2022/08/08/Introduction/" class="article-date">
  <time class="dt-published" datetime="2022-08-08T04:54:03.000Z" itemprop="datePublished">2022-08-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2022/08/08/Introduction/">Introduction</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="My-MainPage"><a href="#My-MainPage" class="headerlink" title="My MainPage"></a><a href="https://lauyikfung.github.io/">My MainPage</a></h1><p>欢迎来到刘益枫的博客！这是我的一个小空间* ⸜( •ᴗ• )⸝ *</p>
<p>主页：<a href="https://lauyikfung.github.io/">My MainPage</a></p>
<p>常用网站索引-&gt;<a href="https://lauyikfung.github.io/blog/webhub/">快速通道</a></p>
<p>欢迎关注我的最新调教作品 <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1jU4y1M74S/">《动离忧》</a></p>
<p>项目网页：<a href="https://lauyikfung.github.io/TRex/">T-Rex</a>，<a href="https://lauyikfung.github.io/Capricorn/">Capricorn</a>，<a href="https://lauyikfung.github.io/multiomics/">医疗多组学</a>，<a href="https://lauyikfung.github.io/CodeGeeX">CodeGeeX</a>，<a href="https://lauyikfung.github.io/kriegspiel">军棋</a>，<a href="https://lauyikfung.github.io/mikucrawler">初音爬虫</a>，<a href="https://lauyikfung.github.io/JapanMJ">日本麻将</a>，<a href="https://lauyikfung.github.io/ICM">美赛O奖</a>，<a href="https://lauyikfung.github.io/headyliar/">头像魔术师</a>。</p>
<p>Welcome to Lewis Yik-Fung Lau’s Blog! This is a small space of mine.</p>
<p><a href="https://lauyikfung.github.io/">My MainPage</a></p>
<p>List of frequently used websites-&gt;<a href="https://lauyikfung.github.io/blog/webhub/"><em>Website List</em></a></p>
<p>You are welcomed to pay attention to my latest Vocaloid-based song <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1jU4y1M74S/"><em>Arouse Worries about Department</em></a>.</p>
<p>Project Webpages: <a href="https://lauyikfung.github.io/TRex/">T-Rex</a>, <a href="https://lauyikfung.github.io/Capricorn/">Capricorn</a>, <a href="https://lauyikfung.github.io/multiomics/">Medical Multiomics</a>, <a href="https://lauyikfung.github.io/CodeGeeX">CodeGeeX</a>, <a href="https://lauyikfung.github.io/kriegspiel">Kriegspiel</a>, <a href="https://lauyikfung.github.io/mikucrawler">Mikucrawler</a>, <a href="https://lauyikfung.github.io/JapanMJ">Japan Mahjong</a>, <a href="https://lauyikfung.github.io/ICM">ICM Outstanding Award</a>, <a href="https://lauyikfung.github.io/headyliar/">Heady Liar</a>.</p>
<img src="/blog/2022/08/08/Introduction/dongliyou.jpg" class="">


      
    </div>
    <footer class="article-footer">
      <a data-url="https://lauyikfung.github.io/blog/2022/08/08/Introduction/" data-id="clwbvs8da0002wsvc319ud11e" data-title="Introduction" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-AI and Us" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2024/05/18/AI%20and%20Us/" class="article-date">
  <time class="dt-published" datetime="2024-05-18T15:56:36.000Z" itemprop="datePublished">2024-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2024/05/18/AI%20and%20Us/">AI, Large Language Models, and Us</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Exploring-the-Future-AI-Large-Language-Models-and-Us"><a href="#Exploring-the-Future-AI-Large-Language-Models-and-Us" class="headerlink" title="Exploring the Future: AI, Large Language Models, and Us"></a><strong>Exploring the Future:</strong> <strong>AI, Large Language Models, and Us</strong></h2>

	<div class="row">
    <embed src="https://github.com/lauyikfung/blog/raw/main/sources/AIandUs.pdf" width="100%" height="550" type="application/pdf">
	</div>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://lauyikfung.github.io/blog/2024/05/18/AI%20and%20Us/" data-id="clwbvs8d40000wsvchixwdpw3" data-title="AI, Large Language Models, and Us" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Yao-Seminar" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2024/03/30/Yao-Seminar/" class="article-date">
  <time class="dt-published" datetime="2024-03-30T15:56:36.000Z" itemprop="datePublished">2024-03-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2024/03/30/Yao-Seminar/">Yao-Seminar</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Yao-Seminar-T-Rex-Retrosynthesis-Prediction"><a href="#Yao-Seminar-T-Rex-Retrosynthesis-Prediction" class="headerlink" title="Yao-Seminar: T-Rex Retrosynthesis Prediction"></a>Yao-Seminar: T-Rex Retrosynthesis Prediction</h2><p><a target="_blank" rel="noopener" href="https://github.com/lauyikfung/blog/raw/main/sources/Yao-Seminar.pdf">PDF下载</a></p>


	<div class="row">
    <embed src="https://github.com/lauyikfung/blog/raw/main/sources/Yao-Seminar.pdf" width="100%" height="550" type="application/pdf">
	</div>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://lauyikfung.github.io/blog/2024/03/30/Yao-Seminar/" data-id="clwbvs8dc0004wsvc1mg45ebi" data-title="Yao-Seminar" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-涪陵公交线路图v2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2024/02/19/%E6%B6%AA%E9%99%B5%E5%85%AC%E4%BA%A4%E7%BA%BF%E8%B7%AF%E5%9B%BEv2/" class="article-date">
  <time class="dt-published" datetime="2024-02-19T07:00:00.000Z" itemprop="datePublished">2024-02-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2024/02/19/%E6%B6%AA%E9%99%B5%E5%85%AC%E4%BA%A4%E7%BA%BF%E8%B7%AF%E5%9B%BEv2/">Bus Route Map</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="涪陵公交线路图v2"><a href="#涪陵公交线路图v2" class="headerlink" title="涪陵公交线路图v2"></a>涪陵公交线路图v2</h2><p>Fuling Bus Route Map</p>




	<div class="row">
    <embed src="sources/BusRoute.pdf" width="100%" height="550" type="application/pdf">
	</div>



      
    </div>
    <footer class="article-footer">
      <a data-url="https://lauyikfung.github.io/blog/2024/02/19/%E6%B6%AA%E9%99%B5%E5%85%AC%E4%BA%A4%E7%BA%BF%E8%B7%AF%E5%9B%BEv2/" data-id="clwbvs8df0007wsvchljb01ej" data-title="Bus Route Map" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-卷出顶级AI实验室（2）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2024/01/25/%E5%8D%B7%E5%87%BA%E9%A1%B6%E7%BA%A7AI%E5%AE%9E%E9%AA%8C%E5%AE%A4%EF%BC%882%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2024-01-24T16:18:00.000Z" itemprop="datePublished">2024-01-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2024/01/25/%E5%8D%B7%E5%87%BA%E9%A1%B6%E7%BA%A7AI%E5%AE%9E%E9%AA%8C%E5%AE%A4%EF%BC%882%EF%BC%89/">AI-2</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="干货-卷出顶级AI实验室（2）"><a href="#干货-卷出顶级AI实验室（2）" class="headerlink" title="干货|卷出顶级AI实验室（2）"></a>干货|卷出顶级AI实验室（2）</h2><p>进阶</p>
<p>（本人已授权小红书转载）</p>
<p>一、对AI的认知：</p>
<p>深度学习是个很强大的工具，万能近似定理（universal approximation theorem）[Hornik, 1991]理论证明具有隐含层（最少一层）感知机神经网络在激励函数（也称激活函数）为非常数函数的情况下具有逼近任何函数的作用。</p>
<ul>
<li><p>然而理论只是证明了其可能性，通常难以得到这种理想的状态，因此对于一般的深度学习模型来说，通常会设计比较复杂的结构，一方面增大其表达能力，从而得到更好的性能；另一方面增大其对参数的容错能力，使其更容易达到较好的性能。</p>
</li>
<li><p>从万能近似定理也可以看出来，神经网络一般都由线性结构和激励函数（非线性结构）组成，最简单的神经网络结构就是由激励函数分开的全连接层（多层感知机，MLP）。</p>
</li>
<li><p>然而，全连接层参数众多，需要的资源太多、计算速度太慢，因此，将全连接层替换为卷积层，将激励函数变为池化层（maxpool或者avgpool），就变成了最基本的卷积神经网络（CNN），著名的LeNet和AlexNet就是CNN，只不过它们用的是多channel的卷积核。</p>
</li>
<li><p>以上的网络都是从前往后依次序的结构，在反向传播的时候容易产生遗忘（梯度消失）的现象，越靠近输入的参数梯度的信号越弱，导致模型容易忽视底层所提取到的特征，例如边缘、纹理等等。因此，ResNet加上一个shortcut连接，即x’&#x3D;x+F(x)，这样，梯度就能以更快的速度传回前面的模块，从而使得模型能够更好地注意底层特征。而DenseNet进一步推广，在每两个模块之间都加上shortcut连接。</p>
</li>
</ul>
<p>从以上的例子可以看出来，深度学习的研究的一种思路就是看到某个问题需要解决，就设计出一个巧妙的结构去解决它。例如，看到RNN容易导致遗忘问题，就让输入的序列两两之间交互，于是便有了attention。而如果是QA，则需要让输入和输出序列之间、输出序列各token之间都有交互，于是就有了Transformer。</p>
<p>然而，深度学习虽然是万能的工具，但通常需要极其大的数据量去训练（例如GPT4、Kimi Chat等目前较好的大语言模型需要上TB的tokens），而对于一些数据比较少的较简单的任务（比如我之前做的多组学探究只有数百个样本），深度学习往往难以奏效，这时需要考虑一些其它的机器学习算法，例如XGBoost、KNN、SVM等。通常这些算法能带来相当令人满意的精度，其中XGBoost结合SHAP[S. Lundberg&amp;Su-In Lee, 2017]等工具还可以做出比较好的可解释性分析。</p>
<p>对于不同的领域，有不同的研究风格，例如NLP领域，目前LLM就是在Transformer结构上不断进行扩大、修改结构（如pre-norm和post-norm、positional embedding、修改激活函数），而传统NLP则将机器学习算法、数据库等技术融入到BERT等语言模型中，用来实现即插即用、个性化等功能。计算机视觉领域则是在基本CNN上不断推陈出新，如diffusion模型（大家可以想一下为什么diffusion模型用在文本生成任务上表现不尽人意）。另外，对于AI4Science这个方向，因为数据类型和数据量各异，则是要用到多种算法，甚至需要用到一些传统机器学习算法，例如像DNA序列、蛋白质序列等，可以用Transformer（例如Alphafold）；对于像核磁共振等图形，可以用CNN、diffusion等模型；而像组学研究，特征离散且数量巨多，则可以用XGBoost算法。</p>
<p>二、常用工具Pytorch介绍</p>
<p>作为AI相关的研究者，最痛苦的莫过于安装环境。一般会去官网下载安装Anaconda或者Miniconda，而对于AI研究者来说，最重要的包莫过于PyTorch了。</p>
<ul>
<li>所有与PyTorch相关的问题都最好先在<a target="_blank" rel="noopener" href="https://pytorch.org/%E4%B8%8A%E9%9D%A2%E6%9F%A5%E8%AF%A2%E4%B8%80%E9%81%8D%EF%BC%8C%E5%B0%A4%E5%85%B6%E6%98%AF%E6%9F%A5%E8%AF%A2PyTorch%E6%96%87%E6%A1%A3%EF%BC%88%E4%B8%8A%E8%BE%B9%E6%A0%8F%E7%9A%84Docs%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95%E9%87%8C%E9%9D%A2%E7%9A%84PyTorch%EF%BC%8C%E7%9B%B4%E6%8E%A5%E7%82%B9%E6%90%9C%E7%B4%A2%E7%AC%A6%E5%8F%B7%E5%87%BA%E6%9D%A5%E7%9A%84%E6%98%AFBlog%EF%BC%89">https://pytorch.org/上面查询一遍，尤其是查询PyTorch文档（上边栏的Docs下拉菜单里面的PyTorch，直接点搜索符号出来的是Blog）</a><ul>
<li>对于英文不太好的uu，可以查找PyTorch中文文档：<a target="_blank" rel="noopener" href="https://pytorch-cn.readthedocs.io/zh/latest/%EF%BC%8C%E4%B8%8D%E8%BF%87%E8%A6%81%E6%83%B3%E6%B7%B1%E5%85%A5%E7%A7%91%E7%A0%94%EF%BC%8C%E8%BF%98%E6%98%AF%E5%BE%97%E6%8F%90%E9%AB%98%E8%8B%B1%E8%AF%AD%E8%83%BD%E5%8A%9B%EF%BC%8C%E5%AD%A6%E4%BC%9A%E9%80%82%E5%BA%94%E8%8B%B1%E6%96%87%E6%96%87%E6%A1%A3">https://pytorch-cn.readthedocs.io/zh/latest/，不过要想深入科研，还是得提高英语能力，学会适应英文文档</a></li>
</ul>
</li>
<li>现在PyTorch的版本已经更新到2.1.x了，理论上兼容1.x的版本，但是会有一些接口上的不同。</li>
<li>安装PyTorch<ul>
<li>可以到官网<a target="_blank" rel="noopener" href="https://pytorch.org/get-started/locally/%E6%9F%A5%E6%89%BE%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AE%89%E8%A3%85%E5%91%BD%E4%BB%A4%EF%BC%8C%E8%AF%B7%E6%B3%A8%E6%84%8F%EF%BC%8C%E5%AE%98%E7%BD%91%E5%AE%89%E8%A3%85%E5%91%BD%E4%BB%A4%E9%BB%98%E8%AE%A4%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%E7%9A%84PyTorch%EF%BC%8C%E5%AE%9E%E9%99%85%E6%83%85%E5%86%B5%E5%9B%A0%E4%B8%BA%E7%AE%97%E5%8A%9B%E5%A4%AA%E9%AB%98%E3%80%81CUDA%E7%89%88%E6%9C%AC%E5%A4%AA%E4%BD%8E%E6%88%96%E8%80%85python%E7%89%88%E6%9C%AC%E8%BE%83%E8%80%81%EF%BC%8C%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81%E5%AF%BB%E6%89%BE%E8%BE%83%E8%80%81%E7%89%88%E6%9C%AC%E7%9A%84PyTorch">https://pytorch.org/get-started/locally/查找对应的安装命令，请注意，官网安装命令默认安装最新版本的PyTorch，实际情况因为算力太高、CUDA版本太低或者python版本较老，可能需要寻找较老版本的PyTorch</a></li>
<li>安装PyTorch需要先考虑显卡的算力，有些高端显卡（例如GeRorce RTX3090、4090），算力太高，低版本的PyTorch不支持。一些极端情况，高端显卡配上低版本的CUDA，没有合适的PyTorch版本，因此，这种情况需要更新CUDA（总不可能换块显卡吧QAQ）。CUDA版本可以通过nvidia-smi命令查看右上角CUDA处或者nvcc -V查询（但需要注意的是，这两者查到的版本可能是不同的。通常后者版本不大于前者的版本就行）</li>
<li>根据对应的CUDA版本，查询对应的PyTorch适合的版本（<a target="_blank" rel="noopener" href="https://pytorch.org/get-started/previous-versions/%E4%B8%8Acudatoolkit%E7%9A%84%E5%8F%AF%E9%80%89%E8%8C%83%E5%9B%B4%EF%BC%89">https://pytorch.org/get-started/previous-versions/上cudatoolkit的可选范围）</a></li>
<li>有时国内的一些服务器不能访问torch官网，因此安装pytorch可能需要考虑更换源，例如<ul>
<li>torch&#x3D;&#x3D;1.9.0 -f <a target="_blank" rel="noopener" href="https://download.pytorch.org/whl/cu110/torch_stable.html">https://download.pytorch.org/whl/cu110/torch_stable.html</a></li>
</ul>
</li>
<li>有些时候因为网络不畅而导致下载很慢，可以手动在<a target="_blank" rel="noopener" href="https://download.pytorch.org/whl/cu1xx/torch_stable.html%EF%BC%88%E4%BE%8B%E5%A6%82https://download.pytorch.org/whl/cu110/torch_stable.html%EF%BC%89%E4%B8%8A%E9%9D%A2%E5%AF%BB%E6%89%BE%E5%88%B0%E5%90%88%E9%80%82%E7%9A%84%E5%AE%89%E8%A3%85%E5%8C%85">https://download.pytorch.org/whl/cu1xx/torch_stable.html（例如https://download.pytorch.org/whl/cu110/torch_stable.html）上面寻找到合适的安装包</a></li>
<li>用torch.cuda.is_available() （记得先import torch）命令查看你的pytorch版本是不是装正确了（你显卡能不能用）</li>
</ul>
</li>
<li>PyTorch的一些重要包<ul>
<li>torch.nn.Module和torch.nn.functional<ul>
<li>前者是一个类，除了要进行对应的计算，还要对模块中的参数等进行管理，而后者只是单纯的计算，需要手动提供对应的参数。</li>
<li>例如nn.Linear包含了一个全连接层，内含了全连接层的weight和bias（如果设定bias&#x3D;True）参数，而nn.functional.linear需要手动提供weight和bias（默认None）</li>
<li>nn.Module其实是一大堆常见模块，例如n维卷积层、池化层（最大池化Maxpool、平均池化Avgpool等）、非线性层、归一化层（组归一化、批归一化、例归一化）、整合结构（GRU、RNN、LSTM、Transformer（含Encoder、Decoder和单独的layer））、全连接层、dropout、损失函数等等，其中除整合结构外，绝大部分都有对应的nn.functional函数。</li>
<li>一般各种神经网络用到的就是nn.Module下面的各种模块（为了适配nn.sequential()），而nn.functional一般会用于loss的计算以及模块间和最终输出前单独的非线性函数。</li>
<li>这两个再配合torch.view&#x2F;reshape等函数，就能搭建一个比较复杂的神经网络了</li>
</ul>
</li>
<li>torch.optim<ul>
<li>这里面包含了一些常见的optimizer，如SGD、Adam、AdamW、RMSprop；以及常用的学习率调节函数（torch.optim.lr_scheduler），如LinearLR，OneCycleLR等等</li>
</ul>
</li>
<li>torch.distributed<ul>
<li>对于大型项目（如LLM），可能会涉及到多张显卡，因此显卡之间的通讯就非常重要，这里面包含了许多分布式操作函数，例如DDP</li>
</ul>
</li>
<li>torch的梯度机制<ul>
<li>一般的流程：<ul>
<li>for epoch in range(num_epoch):</li>
<li>model.train(); for x, target in train_dataset: model.zero_grad(); y &#x3D; model(x); loss &#x3D; loss_function(y, target), loss.backward(); optimizer.step(); scheduler.step()</li>
<li>model.eval(); total_loss &#x3D; 0; for x, target in eval_dataset: model.zero_grad(); y &#x3D; model(x); total_loss +&#x3D; loss_function(y, target); total_loss &#x3D; total_loss &#x2F; len(eval_dataset)</li>
<li>if total_loss &lt; min_loss: torch.save(model)</li>
</ul>
</li>
<li>model.train()和model.eval()：启停模型其中的batch norm和dropout</li>
<li>loss.backward()：传入反向传播命令</li>
<li>optimizer.step()：有时需要手动调用optimizer和scheduler去调整训练梯度的参数和学习率</li>
<li>with torch.no_grad()<ul>
<li>pytorch有自动求导机制，梯度计算是累加式的，每推算一次就会累加一次梯度相关的参数，因此在evaluation推理期间，需要用这个语句停止自动求导</li>
<li>取消自动求导可以降低存储需要，提高计算速度</li>
</ul>
</li>
</ul>
</li>
<li>torch.nn.init<ul>
<li>在神经网络初始化时，通常是随机的参数，而用Xavier、Kaiming等初始化策略，可以使得神经网络在初始时就能让反向传播各层方差几乎相等，从而降低梯度收缩和梯度爆炸的可能性。</li>
</ul>
</li>
<li>torch.utils.data.Dataset<ul>
<li>组织训练、测试和验证数据最常用的类，可以定义批大小、是否随机打乱等等，还支持继承该类进行自定义</li>
</ul>
</li>
</ul>
</li>
<li>PyTorch一些容易被忽略的功能<ul>
<li>torchsummary<ul>
<li>可以直接打印函数每一层输出的size，还可以统计每一层的参数数量和总参数量方便写函数的时候debug</li>
<li>用pip install torchsummary<ul>
<li>from torchsummary import summary </li>
<li>summary(your_model, input_size&#x3D;(bsz, channels, H, W))，其中input size根据设计模型的输入变化，不一定是4维</li>
</ul>
</li>
</ul>
</li>
<li>torch.einsum<ul>
<li>对于形象能力强但抽象能力弱的同学，能够形象描述对应的操作，但很难写对应代码的uu，可以试着用torch.einsum</li>
<li>这是基于爱因斯坦求和约定：如果两个相同的指标出现在指标符号公式的同一项中，则表示对该指标遍历整个取值范围求和。</li>
<li>一般形式：torch.einsum(用符号描述你需求的字符串，输入的list)，字符串的格式为：“矩阵1的shape、矩阵2的shape……-&gt;输出矩阵的shape”。</li>
<li>例如：<ul>
<li>torch.einsum(‘ij, jk-&gt;ik’, [a, b])就是求a与b的矩阵乘法；</li>
<li>torch.einsum(‘jj’, a)就是求矩阵的迹；</li>
<li>torch.einsum(‘…ij-&gt; …ji’, A)就是把A（不管有几维）的最后两维进行转置；</li>
<li>torch.einsum(‘ij-&gt;’, a)就是矩阵求和</li>
<li>torch.einsum(‘ij-&gt;j’, a)就是按列求和</li>
</ul>
</li>
<li>einsum在某些时候（例如二维矩阵点积）可能比对应的函数慢，但有时（例如高维矩阵点乘求和）却可能比相应的函数快</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lauyikfung.github.io/blog/2024/01/25/%E5%8D%B7%E5%87%BA%E9%A1%B6%E7%BA%A7AI%E5%AE%9E%E9%AA%8C%E5%AE%A4%EF%BC%882%EF%BC%89/" data-id="clwbvs8dh0009wsvcare6dhms" data-title="AI-2" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-卷出顶级AI实验室（1）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2024/01/10/%E5%8D%B7%E5%87%BA%E9%A1%B6%E7%BA%A7AI%E5%AE%9E%E9%AA%8C%E5%AE%A4%EF%BC%881%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2024-01-10T15:02:02.000Z" itemprop="datePublished">2024-01-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2024/01/10/%E5%8D%B7%E5%87%BA%E9%A1%B6%E7%BA%A7AI%E5%AE%9E%E9%AA%8C%E5%AE%A4%EF%BC%881%EF%BC%89/">AI-1</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="干货-卷出顶级AI实验室（1）"><a href="#干货-卷出顶级AI实验室（1）" class="headerlink" title="干货|卷出顶级AI实验室（1）"></a>干货|卷出顶级AI实验室（1）</h2><p>（本人已授权小红书转载）</p>
<p>目前NLP这个方向的研究日新月异，想要能够从学术小白到发出自己的第一篇论文，除了掌握基础的工具之外，还得跟踪最新的科研方向，多与身边的peer进行交流，找到尚未发现的研究点。</p>
<p>基础工具</p>
<p>数学：其实NLP方向对数学的要求并不算特别高，掌握常用的线性代数和贝叶斯公式就行，最多加一点复杂度的知识，大多数NLP方向的开发都是非常tricky的，像ResNet、DenseNet也就仅仅是网络架构层次的上的变换，更多的只是收集数据集、或者把某一层的位置前后挪一挪就是一个新的work（例如Transformer里面的pre-norm或者post-norm）。一般用到数学的地方就是各种公式推导（线性代数）以及如何计算metric（例如PPL、pass@k、MSE、BERT-score等等）</p>
<p>需要高深数学工具的都并非本领域的研究重点（例如各种optimizer或者diffusion），当然如果有志于开发更general的工具可以适当多储备一些随机过程和微积分的知识即可。</p>
<p>编程语言：如果只是改网络架构，那么只需要python就行，刷leetcode用到的基础语法可能在更加深入的研究中显得捉襟见肘，可以多了解一些python的进阶语法，例如python装饰器。</p>
<p>对于package而言，numpy、pytorch（很老的项目可能会用tensorflow，直接忽略掉这些项目也没问题）、csv、pandas、matplotlib、tqdm、json（jsonlines）、os、transformers等等是必须要掌握的工具，而pytorch是重中之重，要学会看<a target="_blank" rel="noopener" href="https://pytorch.org/%E4%B8%8A%E9%9D%A2%E7%9A%84%E6%96%87%E6%A1%A3%E3%80%82%E8%80%8C%E4%B8%94%EF%BC%8Cpython%E6%9C%80%E9%87%8D%E8%A6%81%E7%9A%84%E6%98%AF%E7%9C%8B%E6%87%82%E5%85%B6%E4%BB%96%E4%BA%BA%E7%9A%84package%EF%BC%8C%E4%BE%8B%E5%A6%82%E5%9F%BA%E4%BA%8EChatGPT%E7%9A%84%E7%A0%94%E7%A9%B6%E9%80%9A%E5%B8%B8%E9%9C%80%E8%A6%81%E7%86%9F%E6%82%89openai%E5%BA%93%E3%80%82">https://pytorch.org/上面的文档。而且，python最重要的是看懂其他人的package，例如基于ChatGPT的研究通常需要熟悉openai库。</a></p>
<p>如果想要进一步去深入研究，可能会遇到各种各样其他的语言，例如C++、Rust甚至Java，唯一的要求是学会类比，看懂程序是怎么做的，然后能够翻译成python。</p>
<p>如果是学生的话，可以免费使用Copilot，一般给一些自然语言提示，copilot能够自动补全剩下的代码，可以成倍提高效率。</p>
<p>计算机知识：即便是最壕的组，顶配8台A100，在训练大模型的时候，也得考虑显存管理的问题。至少要对MB、GB，以及float32、float64、int等基本单位和类型有一个清晰的认识。例如假设一个float32模型参数量为n，那么nx4（float32一个数为4B）x6（用Adam optimizer训练的时候正向、反向共需要存储6个相应的数），大概就是单卡训练所需要的显存。</p>
<p>需要知道git和bash相关的操作（例如如何git clone别人的工作，如何移动文件夹），在实际经验中还得用一些其他的工具，例如scp、zip、tar、tmux（防止成为学堂路车神），以及nvidia-smi（查看显卡状态）、top（查看进程和cpu状态）、如何配置跳板机等等；还有一些其他边角知识，例如对于一个乱码的数据集，你得需要知道能够在ascii、UTF-8、GB2312等编码之间切换。</p>
<p>这些知识几乎没有哪个中国大学的CS专业课上面会讲，大多都是学生一步步摸索出来（看stack overflow&#x2F;github论坛&#x2F;CSDN&#x2F;知乎 etc）或者对应习题课的助教1to1讲解来的。光学课程、刷leetcode也是没用的，还得有实操经验（这是转码与计算机科班生的最大差距）。</p>
<p>AI知识：非CS专业学生学吴恩达《深度学习》作为进阶确实也够了，要是想要挑战更难的课程，可以找找美国名校（MIT、CMU、Berkeley、Stanford等）的课程，清华的很多课也是借鉴了一部分这些课程的内容和习题的。也可以用《Deep Learning》（理论，有中文版）和《Dive into Deep Learning》（实践、有中文版、有在线Google colab免费试炼场），甚至可以跟着Pytorch官方教程试着开发CNN、NLP等等项目，都是开源的。</p>
<p>找到大方向（NLP、CV、Robotics、Graphics等等）：</p>
<p>可以了解对应方向的一些代表作，找到自己的兴趣所在（NLP：Transformer、Word2vec；CV：CNN、ViT、Diffusion、ResNet；Robotics：PaLM；Graphics：NeRF），我当时入坑NLP就是因为看了Transformer以及相关的一些应用。然后根据Google Scholar上的引用和被引用再拓展自己的视野。</p>
<p>找到具体研究的点</p>
<p>多了解了解最新的研究方向，可以与同学和导师沟通，最好是加入一个实验室，看有什么迫切需要解决的问题，或者长期以来没有用AI解决的任务，又或者紧跟时事，趁着别人还没发出论文，先把别人的工作发表了。</p>
<p>然后根据所了解到的论文，去Google Scholar上搜索对应论文的引用该文章的其他论文，确认该任务没有AI解决的先例，或者AI的效果不好。一般一个灵光一闪的点，95%的概率别人已经用CNN或者BERT等比较简单的结构先占了个坑。一般一个工作的目标是在一个或者多个metric上超过SoTA（state-of-the-art，目前最好结果）。当然，还有其他的工作，比如创立数据集（基准，benchmark），然后测试其他模型在该数据集上的结果。</p>
<p>对于先前只有CNN或者Word2vec等基础模型的工作，可以用更好的模型（ViT&#x2F;Diffusion、Transformer）进行替换。对于已经有更好模型的工作，可以考虑修改网络结构（比如更改position embedding的方式，更改ReLU为Swish等等），不过不是随便乱改，要有一定的理由，这些理由可以从先前论文的conclusion和limitation部分，或者跑出来的结果进行分析（如BERT因为Attention要让所有的token直接都有联系，需要O(n^2)的空间复杂度，可以通过减少attention的感受域变成O(nk)，k远小于n）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lauyikfung.github.io/blog/2024/01/10/%E5%8D%B7%E5%87%BA%E9%A1%B6%E7%BA%A7AI%E5%AE%9E%E9%AA%8C%E5%AE%A4%EF%BC%881%EF%BC%89/" data-id="clwbvs8dc0005wsvc8i22502d" data-title="AI-1" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Physics-note" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2022/11/17/Physics-note/" class="article-date">
  <time class="dt-published" datetime="2022-11-17T03:25:36.000Z" itemprop="datePublished">2022-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2022/11/17/Physics-note/">General Physics for IIIS Note (Maxwell Theory)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="叉院普通物理麦克斯韦理论部分笔记"><a href="#叉院普通物理麦克斯韦理论部分笔记" class="headerlink" title="叉院普通物理麦克斯韦理论部分笔记"></a>叉院普通物理麦克斯韦理论部分笔记</h2><p><a target="_blank" rel="noopener" href="https://github.com/lauyikfung/blog/raw/main/sources/Physics-Maxwell.pdf">PDF下载</a></p>


	<div class="row">
    <embed src="sources/Physics-Maxwell.pdf" width="100%" height="550" type="application/pdf">
	</div>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://lauyikfung.github.io/blog/2022/11/17/Physics-note/" data-id="clwbvs8d80001wsvc44bgcede" data-title="General Physics for IIIS Note (Maxwell Theory)" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-visit" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2022/10/11/visit/" class="article-date">
  <time class="dt-published" datetime="2022-10-11T11:25:36.000Z" itemprop="datePublished">2022-10-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2022/10/11/visit/">visit</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="申请美校交换流程图"><a href="#申请美校交换流程图" class="headerlink" title="申请美校交换流程图"></a>申请美校交换流程图</h2><p><a target="_blank" rel="noopener" href="https://github.com/lauyikfung/blog/raw/main/sources/visit.pdf">PDF下载</a></p>


	<div class="row">
    <embed src="sources/visit.pdf" width="100%" height="550" type="application/pdf">
	</div>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://lauyikfung.github.io/blog/2022/10/11/visit/" data-id="clwbvs8dg0008wsvcb8638b85" data-title="visit" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-SL-note" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2022/08/09/SL-note/" class="article-date">
  <time class="dt-published" datetime="2022-08-08T16:25:36.000Z" itemprop="datePublished">2022-08-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2022/08/09/SL-note/">SL-note</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="深度学习课程笔记：监督学习第二节"><a href="#深度学习课程笔记：监督学习第二节" class="headerlink" title="深度学习课程笔记：监督学习第二节"></a>深度学习课程笔记：监督学习第二节</h2><p><a target="_blank" rel="noopener" href="https://github.com/lauyikfung/blog/raw/main/sources/SL-note.pdf">PDF下载</a></p>


	<div class="row">
    <embed src="sources/SL-note.pdf" width="100%" height="550" type="application/pdf">
	</div>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://lauyikfung.github.io/blog/2022/08/09/SL-note/" data-id="clwbvs8dd0006wsvcdquy7d6v" data-title="SL-note" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2022/08/08/hello-world/" class="article-date">
  <time class="dt-published" datetime="2022-08-07T16:00:00.000Z" itemprop="datePublished">2022-08-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2022/08/08/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Python之禅-The-Zen-of-Python"><a href="#Python之禅-The-Zen-of-Python" class="headerlink" title="Python之禅 - The Zen of Python"></a>Python之禅 - The Zen of Python</h2><p>Cite from <a target="_blank" rel="noopener" href="https://mail.python.org/pipermail/python-list/1999-June/001951.html">“The Python Way”(Tim Peters, 1999)</a></p>
<ul>
<li>Beautiful is better than ugly.</li>
<li>Explicit is better than implicit.</li>
<li>Simple is better than complex.</li>
<li>Complex is better than complicated.</li>
<li>Flat is better than nested.</li>
<li>Sparse is better than dense.</li>
<li>Readability counts.</li>
<li>Special cases aren’t special enough to break the rules.</li>
<li>Although practicality beats purity.</li>
<li>Errors should never pass silently.</li>
<li>Unless explicitly silenced.</li>
<li>In the face of ambiguity, refuse the temptation to guess.</li>
<li>There should be one– and preferably only one –obvious way to do it.</li>
<li>Although that way may not be obvious at first unless you’re Dutch.</li>
<li>Now is better than never.</li>
<li>Although never is often better than <em>right</em> now.</li>
<li>If the implementation is hard to explain, it’s a bad idea.</li>
<li>If the implementation is easy to explain, it may be a good idea.</li>
<li>Namespaces are one honking great idea – let’s do more of those!</li>
<li>优美胜于丑陋。</li>
<li>明确胜于隐晦。</li>
<li>简单胜于复杂。</li>
<li>复杂胜于难懂。</li>
<li>扁平比嵌套好。</li>
<li>留白比紧凑好。</li>
<li>可读性很重要。</li>
<li>特殊情况不足以违反规则。</li>
<li>虽然实用胜过纯粹性，</li>
<li>错误永远不应该悄无声息地被忽略。</li>
<li>除非故意忽略之。</li>
<li>面对歧义，拒绝猜测的诱惑。</li>
<li>应该有一种——最好只有一种——明显的处理方式，</li>
<li>尽管这种方式一开始可能并不明显，除非你是Python之父。</li>
<li>做比不做好，</li>
<li>但不假思索就动手还不如不做。</li>
<li>如果实现很难解释，那这就是个坏主意。</li>
<li>如果实现很容易解释，这可能是一个好主意。</li>
<li>名称空间是一个非常好的主意——多利用它们！</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lauyikfung.github.io/blog/2022/08/08/hello-world/" data-id="clwbvs8db0003wsvcbulrgawx" data-title="Hello World" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2024/05/">五月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2024/03/">三月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2024/02/">二月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2024/01/">一月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/11/">十一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/10/">十月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/08/">八月 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2024/05/18/AI%20and%20Us/">AI, Large Language Models, and Us</a>
          </li>
        
          <li>
            <a href="/blog/2024/03/30/Yao-Seminar/">Yao-Seminar</a>
          </li>
        
          <li>
            <a href="/blog/2024/02/19/%E6%B6%AA%E9%99%B5%E5%85%AC%E4%BA%A4%E7%BA%BF%E8%B7%AF%E5%9B%BEv2/">Bus Route Map</a>
          </li>
        
          <li>
            <a href="/blog/2024/01/25/%E5%8D%B7%E5%87%BA%E9%A1%B6%E7%BA%A7AI%E5%AE%9E%E9%AA%8C%E5%AE%A4%EF%BC%882%EF%BC%89/">AI-2</a>
          </li>
        
          <li>
            <a href="/blog/2024/01/10/%E5%8D%B7%E5%87%BA%E9%A1%B6%E7%BA%A7AI%E5%AE%9E%E9%AA%8C%E5%AE%A4%EF%BC%881%EF%BC%89/">AI-1</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Lewis Yik-Fung Lau<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/blog/js/jquery-3.4.1.min.js"></script>



  
<script src="/blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/blog/js/script.js"></script>





  </div>
</body>
</html>